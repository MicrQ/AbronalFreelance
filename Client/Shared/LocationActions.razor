@page "/location/edit/{id}"
@inject HttpClient http

<EditForm Model="@Location" OnValidSubmit="UpdateLocation">
    <InputText @bind-Value="@Location.Name" />
    <InputText bind-Value="@Location.LocationTypeId.ToString()" />
    <InputText bind-Value="@Location.ParentId" />
    <button type="submit">Save Changes</button>
</EditForm>


@code {
    [Parameter]
    public string Id { get; set; }
    public LocationDTO LocationDTO = new LocationDTO();
    private Location Location = new Location();

    private async void UpdateLocation()
    {
        await http.PutAsJsonAsync($"api/location/{Id}", Location);
    }
    protected override async Task OnInitializedAsync()
    {
        var location = await http.GetFromJsonAsync<Location>($"api/location/{Id}");
        if (location != null)
        {
            Location = location;
            LocationDTO.Name = Location.Name;
            LocationDTO.LocationTypeId = Location.LocationTypeId.ToString();
            LocationDTO.ParentId = Location.ParentId.ToString();
        }
        /// notfound should be used !!!!!!!!
    }
}
